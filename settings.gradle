pluginManagement {
    repositories {
        mavenCentral()
        gradlePluginPortal()
        maven {
            name = "GitHubPackages"
            url = uri("https://maven.pkg.github.com/ssu-commerce/ssu-commerce-core")
            credentials {
                (credentials) -> {
                    String gprUser = (String) settings.getGradle().findProperty("gpr.user")
                    String gprKey = (String) settings.getGradle().findProperty("gpr.key")

                    if (gprUser != null && !gprUser.isEmpty() && gprKey != null && !gprKey.isEmpty()) {
                        gprUser = System.getenv("USERNAME")
                        gprKey = System.getenv("TOKEN")
                    }

                    username = gprUser
                    password = gprKey
                }
            }
        }
    }
}

rootProject.name = 'order-server'

include('api')
include('grpc')
